<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
       xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
       layout:decorate="~{/layout/layout_publisher_basic}">

<head>
    <title>관리용</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
     </head>

<body>
 <section layout:fragment="content">
		<h4>/bookStore for bookStore</h4>
		<hr />
<div>
	<ul class="nav nav-tabs" id="myTab" role="tablist">
	  <li class="nav-item">
	    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
	  </li>
	  <li class="nav-item">
	    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profile</a>
	  </li>
	</ul>
	
	<div class="tab-content" id="myTabContent">
	  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
	  <br/>
		<button onclick="javascript:loadData();">load</button>
	  	<br/>
	    <br/>
	  <div class="small-12 medium-9 columns" >
	    
				<div style = "width:100%;height:500px;overflow:hidden;">
					<div id="example"></div>
				</div>
	  </div>
		
	  </div>
	  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">...</div>
	 </div>
	
	
		
</div>	
		  <!-- Modal -->
			<div class="modal" id="exampleModal" data-backdrop="static" tabindex="-1" role="dialog"  aria-labelledby="exampleModalLabel" aria-hidden="true">
			  
	       </div>	
</section>


<th:block layout:fragment="script">
<script th:inline="javascript">

var hot = new Handsontable(example, {
	  rowHeaders: true,
	  colHeaders: true,
	  colHeaders: ['bookCode', '도서명', '바코드', '저자','출판사','정가','발행일'],
	  startRows: 1,
	  startCols: 6,
	  width: '100%',
	  manualColumnResize: true,
	  columns: [
				    {data: 'bookCode',},
				    {data: 'bookTitle'},
				    {data: 'barcode'},
				    {data: 'author'},
				    {data: 'publisher'},
				    {data: 'price', type: 'numeric',numericFormat:{pattern: '0,0'}},
				    {data: 'pubDate'},
				    {type: 'checkbox',checkedTemplate: '1',uncheckedTemplate: '0'}
		   		],
	  data: JSON.parse(JSON.stringify([[${result.content}]]))
	 });
	 
function loadData() {
	
	$('#exampleModal').modal('show');
    
	$.ajax({
        url: '/bookOrder/booklist',
        type: 'get',
        dataType: 'json',
        async: true,
        success:function(res){
        	hot.loadData(res);
        },
        error:function(request,status,error){
            alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
        }
     	,
     	complete : function(data) {
		setTimeout(function(){$('#exampleModal').modal('hide');
		        	
		        	}
		        	,1000);
   		}

    });
}

$('#exampleModal').html('<div class="modal-dialog modal-dialog-centered" role="document"> \
		  <div class="modal-content"> \
			<div class="modal-header"> \
	        <h5 class="modal-title" id="exampleModalLabel">ediro</h5> \
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"> \
	          <span aria-hidden="true">&times;</span> \
	        </button> \
		      </div> \
		      <div class="modal-body"> \
		       처리중... \
		      </div> \
		      <div class="modal-footer"> \
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> \
		      </div> \
		    </div> \
		  </div> \
		</div>');
	
	

</script>
</th:block>



 
   
</body>

</html>